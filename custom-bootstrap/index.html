<html>
<head>
	<link rel="stylesheet" type="text/css" href="./bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="./bootstrap/css/bootstrap-theme.min.css">
	<script type="text/javascript" src="./jquery-2.0.0.min.js"></script>
	<script type="text/javascript" src="./bootstrap/js/bootstrap.min.js"></script>
	<title></title>
	<style type="text/css">
	.c:after{content:"";display:block; clear:both;}
.c {zoom:1;}
	.switcher[data-state=on] .switcher-l,.switcher[data-state=on] .switcher-r,.switcher[data-state=on] .switcher-c{
		background: blue;
	}
	.switcher-clips{position: relative;z-index: 2;}
	.switcher-clips-back{z-index: 1;}
	.switcher-clips-back *{background: #fff !important;}

	
	.switcher-l,.switcher-r{
		height:100%;width:3em;border-radius: 50%;padding: 0;
		/*position:absolute;*/
	}
	.switcher-l{float:left;border-top-right-radius: 0;
				border-bottom-right-radius: 0;border-right:0 }
	.switcher-r{right:0;border-top-left-radius: 0;
				border-bottom-left-radius: 0;float:left;border-left: 0}
	.switcher-c{height: 100%;float:left;border-width:1px 0 1px 0;border-radius: 0}
	.switcher-btn{
		z-index:3;
		width: 3em;
		border-radius:50%;position:absolute;right:0;height:101%;padding:0
	}
	</style>
	<script type="text/javascript">
(function  ($) {
	var _ms='<select multiple class="form-control">';
	var ms_='</select>';
/*	var bs=function(){
		
	};*/
	var ms=function(){
	
		this.options=[];
		if(arguments.length>0){
			var args=Array.prototype.slice.call(arguments) ;
				var args1=args.shift();
				for (var i = 0; i < args1.length; i++) {
					this.options.push(args1[i]);
				};			
		}
	};
	ms.prototype={
		addItem:function(s){
			this.options.push(s);
		},
		appendTo:function(s){
			var options='';
			for (var i = 0; i < this.options.length; i++) {
				options+=' <option>'+this.options[i]+'</option>';
			};
			$(_ms+options+ms_).appendTo(s);
		}
	};
	$bui={
		multiSelect:ms
	};
/*	$.extend({
  BUI: bs.prototype
});
*/
})(jQuery);
	</script>
</head>
<body>
	<p>switcher</p>
 <div class="switcher" id="switcher" style="padding:0;position:relative;overflow:hidden;height:3em;min-width: 5em;" data-state="on">
 	<!--span class="btn btn-primary" style="width:100%;height:100%;position:absolute;"></span-->

<i class="btn btn-default switcher-btn"></i>
<div class="switcher-clips c">
<div class="btn btn-default switcher-l" ></div>
<div class="btn btn-default switcher-c"></div>
<div class="btn btn-default switcher-r" ></div>
</div>
 </div>
</body>
<script type="text/javascript">
(function($){

	var obj = new $bui.multiSelect(['1','2']);
obj.addItem('A');
obj.addItem('b');
obj.addItem('c');
obj.appendTo('body');
var $switcher=$('.switcher');
$switcher.each(function(i,e){
	$this=$(this);

	// $this.width($this.width());
	$btn=$this.find('.switcher-btn');
	$c=$this.find('.switcher-c');
	$clip=$this.find('.switcher-clips');
	var $clone=$clip.clone(true).css({position: 'absolute',top: 0,left: 0,height:$this.height()}).addClass('switcher-clips-back');
	
	$clone.appendTo(this);
	
/*	$(this).width($(this).width());
	$(this).height($(this).height());*/
	$(this).on('click',function(){
	console.log($(this).data('state'));
	
	
	if($(this).data('state')=='on'){
		$(this).data('state','off');
		// $(this).attr('data-state','off');
		$clip.animate({right:'100%'},500);
		var x=$this.width()-$btn.width();
		// $(this).children().eq(1).width($(this).children().eq(1).height());
		$btn.animate({right:x},500);
	}else{
		$(this).data('state','on');
		// $(this).attr('data-state','on');
		$clip.animate({right:0},500);
		$btn.animate({right:0},500);
	}
	
	});

});
$('.switcher-c').width($('#switcher').width()-$('#switcher').height()*2);

})(jQuery);
</script>
</html>